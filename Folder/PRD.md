# 移动 GUI Agent 自动巡查与举报盗版内容需求

## 1. 环境设置与 ADB 控制

### 功能描述
- **目标**：通过 ADB（Android 调试桥）指令控制安卓模拟器中应用的启动与操作。
- **需求**：
  1. Agent 能在安卓模拟器环境中运行，并通过 ADB 控制模拟器中闲鱼或小红书应用的启动。
  2. 实现自动化操作，包括进入应用的搜索界面，输入关键词“得到”进行搜索。
  3. 控制页面滚动以浏览搜索结果，并根据需要点击进入商品或笔记详情页面。

### 功能拆解
1. **启动应用**：通过 ADB 指令启动闲鱼或小红书应用。
2. **搜索关键词**：在搜索框中输入“得到”并提交。
3. **滚动浏览**：实现页面滚动，展示多条搜索结果。
4. **进入详情页**：点击搜索结果进入商品或笔记的详细页面。

---

## 2. 多模态界面内容解析

### 功能描述
- **目标**：利用多模态模型（如 BLIP、MiniGPT-4、IDEFICS 等）对界面截图及 OCR 提取的文字进行联合分析，理解页面内容。
- **需求**：
  1. Agent 捕捉并分析应用页面截图。
  2. OCR 提取页面文本，结合图片内容进行语义分析。
  3. 提取以下信息：
     - **标题**：商品标题或笔记标题文本。
     - **图片**：商品主图或笔记封面图片中的关键信息。
     - **描述**：商品详情描述文本或笔记正文内容。
     - **评论**：抓取评论区的用户评论文本，进行情感分析。

### 功能拆解
1. **页面截图**：定期或根据需求截取页面截图。
2. **OCR 识别**：提取页面上的文字内容。
3. **图文分析**：将图片信息和文字信息结合，进行联合语义分析。

---

## 3. 盗版内容识别与逻辑标注

### 功能描述
- **目标**：分析并识别是否存在盗版“得到”内容，根据规则判断是否进行举报。
- **需求**：
  1. 对每个搜索结果的综合内容进行分析，包括图片、标题、描述和评论。
  2. 判断是否涉嫌盗版“得到”内容，并标注判断依据。
  3. 若判定为盗版内容，自动调用应用的举报功能。
  4. 输出明确的判定依据和推理逻辑，记录判断结果。

### 功能拆解
1. **侵权判断规则**：分析商品/笔记是否涉嫌侵权，依据可以是标题、图片、描述、价格和评论的综合判断。
2. **报告逻辑**：提供明确的推理说明。例如：“图片显示为得到付费电子书封面 + 标价明显低于正版价格 + 评论区用户反馈‘买后收到的是盗版资料’，综合判断此商品涉嫌盗版。”
3. **自动举报**：调用应用内的举报功能，对判定为盗版的商品或笔记进行举报。

---

## 4. 任务规划与流程控制

### 功能描述
- **目标**：确保 Agent 能自动、稳定地执行整套操作流程。
- **需求**：
  1. 将检测举报过程分解为多个步骤，并自动执行：
     - 启动应用
     - 搜索关键词
     - 遍历搜索结果
     - 进入详情判断
     - 举报并记录结果
     - 返回列表继续
  2. 任务执行过程中需要稳定的状态监测和等待机制，确保不同设备、网络状况下的稳定性。
  3. 在执行过程中出现异常时，能够进行重试或跳过。

### 功能拆解
1. **任务分解**：将流程分为启动应用、搜索、判断、举报等几个步骤。
2. **流程控制**：通过状态监测、延时处理等方式控制流程的执行。
3. **错误处理**：确保在出现错误或异常时，系统能够自动调整，避免任务中断。

---

## 5. 技术与架构设计

### 功能描述
- **目标**：提供明确的技术设计与架构，确保整个系统高效稳定运行。
- **需求**：
  1. 采用端到端的多模态模型处理界面内容，实现自动化的图像识别与文字提取。
  2. ADB 控制与操作时，需要配合延时和状态检查，提高稳定性。
  3. 使用任务分解和循环执行的策略架构，确保整个任务的稳定性和容错性。

### 功能拆解
1. **多模态模型**：使用视觉-语言模型进行图像和文字的联合理解。
2. **稳定性优化**：增加延时、状态检查、重试机制，保证在不同网络和设备下都能稳定执行。
3. **任务管理**：通过有限状态机（FSM）或决策树来管理任务的各个状态和步骤，确保在不同情境下合理跳转。

---

## 6. 系统架构与设计文档

### 功能描述
- **目标**：提供系统架构图、流程图和技术说明文档，便于开发与评审。
- **需求**：
  1. 编写详细的技术说明文档，描述所用的多模态模型、界面控制策略、数据处理流程等。
  2. 提供系统架构图、任务流程图等辅助材料。
  3. 提供完整的源代码，并说明如何在本地搭建环境、运行 Agent。

### 功能拆解
1. **系统架构图**：展示整个系统的模块和交互关系。
2. **流程图**：详细描述每个功能模块的执行顺序和逻辑。
3. **技术文档**：包含系统设计、算法描述、代码实现等详细内容，便于评审和后续开发。
